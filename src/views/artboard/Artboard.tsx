import { useContext, useEffect, useState } from 'react';
// -- types ----------------------------------------------------------------------------------------

import { IArtboardProps } from '../../@types/artboard';
import { ArtBoardContext } from '../../context/ArtBoardContext';

// -- stylesheet -----------------------------------------------------------------------------------

import './Artboard.scss';
import ArtboardHandler from './ArtboardHandler';

// -- view component definition --------------------------------------------------------------------

// import { ArtboardSketch, boardSketch } from './ArtboardSketch';
import { ArtboardTurtleSketch, turtleSketch } from './ArtboardTurtle';

/**
 * View of the Artboard Framework component.
 *
 * @returns root JSX element
 */
export default function (props: IArtboardProps): JSX.Element {
  // list of all artboards generated by the user.
  const { artBoardList } = useContext(ArtBoardContext);
  const [id, setId] = useState<number>(0);
  const [doMove, setDoMove] = useState<boolean>(false);
  const [doRotate, setDoRotation] = useState<boolean>(false);
  const [doMakeArc, setDoMakeArc] = useState<boolean>(false);
  const [turtleColor, setTurtleColor] = useState<string>();
  const colors = ['red', 'magenta', 'pink', 'orange', 'green', 'blue'];

  const handleMove = () => setDoMove(!doMove);
  const handleRotate = () => setDoRotation(!doRotate);
  const handleArc = () => setDoMakeArc(!doMakeArc);

  return (
    <>
      <div id="artboard-wrapper">
        <h4>Artboard {`(${props.dimensions[0]} Ã— ${props.dimensions[1]})`}</h4>
        {artBoardList.map((board) => (
          <ArtboardHandler
            index={board._turtle._id}
            turtle={board._turtle}
            updateDimensions={props.updateDimensions}
            moveTurtle={handleMove}
          />
        ))}
      </div>
      <ArtboardTurtleSketch
        artBoardList={artBoardList}
        sketch={turtleSketch}
        index={id + 1}
        color={turtleColor}
      />
    </>
  );
}
